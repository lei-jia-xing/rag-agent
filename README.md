<div align="center">

# RAG Agent

**ç”µæ°”å·¥ç¨‹è®¾å¤‡é—®ç­”æ™ºèƒ½ä½“ç³»ç»Ÿ**

[![Python 3.12+](https://img.shields.io/badge/python-3.12+-blue.svg)](https://www.python.org/downloads/)
[![uv](https://img.shields.io/badge/uv-package%20manager-green.svg)](https://github.com/astral-sh/uv)
[![LangChain](https://img.shields.io/badge/LangChain-1.1.0-orange.svg)](https://www.langchain.com/)
[![LangGraph](https://img.shields.io/badge/LangGraph-0.3.0-purple.svg)](https://github.com/langchain-ai/langgraph)
[![Code Quality](https://img.shields.io/badge/code%20quality-ruff%20%2B%20pyright-success.svg)](https://github.com/astral-sh/ruff)

åŸºäº **LangChain + LangGraph** æ„å»ºçš„å¤šæ™ºèƒ½ä½“ RAG ç³»ç»Ÿï¼Œä¸“æ³¨äºç”µæ°”å·¥ç¨‹å’Œå·¥ä¸šè®¾å¤‡é¢†åŸŸçš„æ™ºèƒ½é—®ç­”ä¸è®¾å¤‡è¯Šæ–­

</div>

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
uv sync
```

### 2. é…ç½® API

å¤åˆ¶ç¤ºä¾‹é…ç½®å¹¶ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env`ï¼š

```env
OPENAI_API_KEY=sk-xxx                              # Silicon Flow API å¯†é’¥
OPENAI_API_BASE=https://api.siliconflow.cn/v1     # API ç«¯ç‚¹
MODEL_NAME=Qwen/Qwen2.5-7B-Instruct                # LLM æ¨¡å‹

# æ•°æ®é›†é…ç½®ï¼ˆå¯é€‰ï¼‰
# å•ä¸€æ•°æ®é›†æ¨¡å¼
DATASET_NAME=STEM-AI-mtl/Electrical-engineering   # æ•°æ®é›†

# å¤šæ•°æ®é›†æ¨¡å¼ï¼ˆæ¨èï¼‰- åŒæ—¶åŠ è½½å¤šä¸ªæ•°æ®é›†
MULTI_DATASETS=all                                # all æˆ–æŒ‡å®šæ•°æ®é›†
```

### 3. æ„å»ºå‘é‡æ•°æ®åº“

é¦–æ¬¡ä½¿ç”¨éœ€è¦é¢„å…ˆæ„å»ºå‘é‡æ•°æ®åº“ï¼ˆå…¨é‡åŠ è½½æ•°æ®é›†ï¼‰

```bash
# æ„å»ºå‘é‡æ•°æ®åº“
uv run rag-agent build
```

### 4. å¯åŠ¨åº”ç”¨

å‘é‡æ•°æ®åº“æ„å»ºå®Œæˆåï¼Œåç»­ç›´æ¥è¿è¡Œï¼š

```bash
uv run rag-agent
```

---

## ğŸ¨ LaTeX æŠ¥å‘Šç”Ÿæˆ

**å†…ç½®ä¸“ä¸šæ¨¡æ¿ï¼Œæ”¯æŒä¸€é”®ç”Ÿæˆè®¾å¤‡è¯Šæ–­æŠ¥å‘Š**

æœ¬é¡¹ç›®é›†æˆäº† LaTeX MCP æœåŠ¡ï¼Œæ”¯æŒä¸“ä¸šæŠ¥å‘Šç”Ÿæˆã€‚

### åŠŸèƒ½ç‰¹æ€§

- **æ¨¡æ¿å†…ç½®**ï¼šæ¨¡æ¿ç›´æ¥é›†æˆåœ¨ LaTeX MCP ä¸­ï¼Œæ— éœ€é¢å¤–æœåŠ¡
- **ç®€å•è°ƒç”¨**ï¼šå•æ¬¡ MCP è°ƒç”¨å®Œæˆæ¸²æŸ“å’Œç¼–è¯‘
- **JSON SchemaéªŒè¯**ï¼šç¡®ä¿å­—æ®µæ•°æ®ç¬¦åˆæ¨¡æ¿è¦æ±‚
- **Jinja2æ¸²æŸ“**ï¼šæ”¯æŒå¤æ‚çš„æ¨¡æ¿é€»è¾‘å’Œæ¡ä»¶åˆ¤æ–­
- **ä¸“ä¸šæ¨¡æ¿**ï¼šå†…ç½®è®¾å¤‡å¥åº·è¯Šæ–­æŠ¥å‘Šï¼ˆ32ä¸ªå­—æ®µï¼Œ9å¤§ç« èŠ‚ï¼‰

### å†…ç½®æ¨¡æ¿

#### è®¾å¤‡å¥åº·è¯Šæ–­æŠ¥å‘Š (device_diagnosis)

ä¸“ä¸šè¯¦ç»†æŠ€æœ¯æŠ¥å‘Šé£æ ¼çš„è®¾å¤‡è¯Šæ–­æ¨¡æ¿ï¼š

```
å°é¢é¡µ
  â”œâ”€â”€ æŠ¥å‘Šæ ‡é¢˜ã€ç¼–å·ã€æ—¥æœŸ
  â”œâ”€â”€ è®¾å¤‡ä¿¡æ¯è¡¨æ ¼
  â””â”€â”€ å¥åº·è¯„åˆ†å¯è§†åŒ–ï¼ˆTikZåœ†å½¢ä»ªè¡¨ç›˜ï¼‰

æ‰§è¡Œæ‘˜è¦
  â””â”€â”€ è¯Šæ–­æ¦‚è¦

è®¾å¤‡åŸºæœ¬ä¿¡æ¯
  â”œâ”€â”€ æŠ€æœ¯å‚æ•°
  â”œâ”€â”€ è¿è¡Œç¯å¢ƒ
  â””â”€â”€ å†å²ç»´æŠ¤è®°å½•

å¥åº·çŠ¶æ€è¯„ä¼°
  â””â”€â”€ å¥åº·è¯„åˆ†è¡¨æ ¼ï¼ˆåŠ¨æ€é¢œè‰²ï¼‰

ç›‘æµ‹æ•°æ®åˆ†æ
  â”œâ”€â”€ æ•°æ®æ±‡æ€»
  â”œâ”€â”€ å…³é”®æŒ‡æ ‡åˆ†æ
  â”œâ”€â”€ è¶‹åŠ¿åˆ†æ
  â””â”€â”€ å¼‚å¸¸æ£€æµ‹

æ•…éšœè¯Šæ–­è¯¦æƒ…
  â”œâ”€â”€ æ•…éšœç°è±¡
  â”œâ”€â”€ åŸå› åˆ†æ
  â””â”€â”€ æ•…éšœå®šä½

é£é™©è¯„ä¼°
  â”œâ”€â”€ å½“å‰é£é™©
  â”œâ”€â”€ æ½œåœ¨é£é™©
  â””â”€â”€ é£é™©æ§åˆ¶å»ºè®®

ç»´æŠ¤å»ºè®®
  â”œâ”€â”€ ç´§æ€¥å¤„ç†æªæ–½ï¼ˆé«˜äº®æ¡†ï¼‰
  â”œâ”€â”€ ç»´æŠ¤è®¡åˆ’
  â””â”€â”€ å¤‡ä»¶å»ºè®®

è¯Šæ–­æ–¹æ³•ä¸æ ‡å‡†
  â””â”€â”€ ç›¸å…³æ ‡å‡†å¼•ç”¨

ç»“è®ºä¸å»ºè®®
```

### ä½¿ç”¨ç¤ºä¾‹

```python
from rag_agent.mcp.latex_client import generate_diagnosis_report

# ç”Ÿæˆè®¾å¤‡è¯Šæ–­æŠ¥å‘Š
result = generate_diagnosis_report(
    data={
        "title": "è®¾å¤‡å¥åº·è¯Šæ–­æŠ¥å‘Š",
        "device_name": "å˜å‹å™¨",
        "health_score": 85,
        "health_status": "æ­£å¸¸",
        "risk_level": "ä½",
        # ... å…¶ä»–28ä¸ªå­—æ®µ
    },
    template_id="device_diagnosis"
)

if result["success"]:
    print(f"æŠ¥å‘Šå·²ç”Ÿæˆ: {result['output_path']}")
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **æ•°æ®æº** | Hugging Face Datasets | ç”µæ°”å·¥ç¨‹é—®ç­”æ•°æ®é›†ï¼ˆ1131æ¡ï¼‰ |
| **åµŒå…¥æ¨¡å‹** | Sentence Transformers | paraphrase-multilingual-MiniLM-L12-v2 |
| **å‘é‡æ•°æ®åº“** | FAISS | Facebook AI ç›¸ä¼¼åº¦æœç´¢ |
| **LLM** | Qwen2.5-7B-Instruct | é€šè¿‡ Silicon Flow API è°ƒç”¨ |
| **æ¡†æ¶** | LangChain 1.1.0 | RAG ç¼–æ’ä¸é“¾å¼è°ƒç”¨ |
| **CLI** | prompt_toolkit + Rich | äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢ |
| **åŒ…ç®¡ç†** | uv | å¿«é€Ÿä¾èµ–ç®¡ç† |
| **ä»£ç è´¨é‡** | Ruff + Pyright | ä»£ç æ£€æŸ¥ä¸ç±»å‹æ£€æŸ¥ |
| **MCPæ¨¡æ¿** | Jinja2 + JSON Schema | æ¨¡æ¿å¡«å……æœåŠ¡ |

---

## ğŸ”§ å¼€å‘æŒ‡å—

### ğŸ“š æ–‡æ¡£

é¡¹ç›®æ–‡æ¡£ä½äº `docs/` ç›®å½•ï¼š
- [æ¶æ„è®¾è®¡æ–‡æ¡£](docs/ARCHITECTURE.md) - LangGraph å¤šæ™ºèƒ½ä½“æ¶æ„
- [æ•°æ®é›†ä½¿ç”¨æŒ‡å—](docs/DATASET_RECOMMENDATIONS.md) - å¤šæ•°æ®é›†é…ç½®

### é¡¹ç›®ç»“æ„

```
rag_agent/
â”œâ”€â”€ rag_agent/              # ä¸»åŒ…
â”‚   â”œâ”€â”€ __init__.py         # å…¥å£ç‚¹
â”‚   â”œâ”€â”€ cli.py              # CLIï¼ˆTyper + prompt_toolkitï¼‰
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ data_loader.py      # æ•°æ®é›†åŠ è½½
â”‚   â”œâ”€â”€ rag_engine.py       # RAG æ ¸å¿ƒå¼•æ“
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/             # LangGraph æ™ºèƒ½ä½“èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ router.py       # è·¯ç”±æ™ºèƒ½ä½“ï¼ˆæ„å›¾åˆ†ç±»ï¼‰
â”‚   â”‚   â”œâ”€â”€ diagnosis_agent.py  # è¯Šæ–­æ™ºèƒ½ä½“ï¼ˆ4èŠ‚ç‚¹ï¼‰
â”‚   â”‚   â””â”€â”€ qa_agent.py     # é—®ç­”æ™ºèƒ½ä½“ï¼ˆ2èŠ‚ç‚¹ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ graphs/             # LangGraph å·¥ä½œæµå›¾
â”‚   â”‚   â”œâ”€â”€ main_graph.py   # ä¸»è·¯ç”±å›¾
â”‚   â”‚   â”œâ”€â”€ diagnosis_graph.py  # è¯Šæ–­æµç¨‹å›¾
â”‚   â”‚   â””â”€â”€ qa_graph.py     # é—®ç­”æµç¨‹å›¾
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/            # çŠ¶æ€å®šä¹‰
â”‚   â”‚   â””â”€â”€ state.py        # AgentState, DiagnosisState, QAState
â”‚   â”‚
â”‚   â”œâ”€â”€ memory/             # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ short_term.py   # çŸ­æœŸè®°å¿†ï¼ˆå¯¹è¯å†å²ï¼‰
â”‚   â”‚   â””â”€â”€ long_term.py    # é•¿æœŸè®°å¿†ï¼ˆå‘é‡å­˜å‚¨ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ mcp/                # MCP å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ latex_client.py # LaTeX MCP å®¢æˆ·ç«¯
â”‚   â”‚
â”‚   â””â”€â”€ apps/               # åº”ç”¨å±‚
â”‚       â”œâ”€â”€ base.py         # åŸºç¡€åº”ç”¨æŠ½è±¡ç±»
â”‚       â”œâ”€â”€ qa_app.py       # é—®ç­”åº”ç”¨
â”‚       â””â”€â”€ report_app.py   # æŠ¥å‘Šç”Ÿæˆåº”ç”¨
â”‚
â”œâ”€â”€ mcp-latex/              # LaTeX MCP æœåŠ¡ï¼ˆå«å†…ç½®æ¨¡æ¿ï¼‰
â”‚   â”œâ”€â”€ templates/          # æŠ¥å‘Šæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ device_diagnosis/
â”‚   â”œâ”€â”€ mcp_latex_tool.py   # MCP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ template_manager.py # Jinja2 æ¨¡æ¿ç®¡ç†å™¨
â”‚   â””â”€â”€ Dockerfile          # å®¹å™¨åŒ–éƒ¨ç½²
â”‚
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ INDEX.md            # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ ARCHITECTURE.md     # æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ QUICKSTART.md       # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ CODE_QUALITY_REPORT.md  # ä»£ç è´¨é‡æŠ¥å‘Š
â”‚   â””â”€â”€ IMPLEMENTATION_STATUS.md # å®æ–½çŠ¶æ€
â”‚
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®
â”œâ”€â”€ pyrightconfig.json      # Pyright é…ç½®
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md               # æ–‡æ¡£
```

### æ¶æ„æ¦‚è§ˆ

æœ¬é¡¹ç›®ä½¿ç”¨ **LangGraph** æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Main Agent (Router)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Query â†’ Intent Classification          â”‚
â”‚           â†“                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â†“         â†“         â†“                 â”‚
â”‚ Diagnosis  QA    Reasoning             â”‚
â”‚  Agent    Agent   Agent                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ™ºèƒ½ä½“ç±»å‹**ï¼š
- **Router Agent**: æ„å›¾è¯†åˆ«ï¼Œè·¯ç”±åˆ°åˆé€‚çš„å­æ™ºèƒ½ä½“
- **Diagnosis Agent**: è®¾å¤‡è¯Šæ–­ï¼ˆæ£€ç´¢ â†’ åˆ†æ â†’ å­—æ®µ â†’ æŠ¥å‘Šï¼‰
- **QA Agent**: æ™ºèƒ½é—®ç­”ï¼ˆæ£€ç´¢ â†’ åˆæˆï¼‰
- **Reasoning Agent**: å¤æ‚æ¨ç†ï¼ˆå¾…å®ç°ï¼‰

è¯¦è§ [ARCHITECTURE.md](docs/ARCHITECTURE.md)

### ä»£ç è´¨é‡æ£€æŸ¥

```bash
# æ ¼å¼åŒ–ä»£ç 
uv run ruff format .

# æ£€æŸ¥ä»£ç è´¨é‡
uv run ruff check .

# ç±»å‹æ£€æŸ¥
uv run pyright
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### æ•°æ®é›†é€‰æ‹©

```env
# ç”µæ°”å·¥ç¨‹ï¼ˆé»˜è®¤ï¼‰
DATASET_NAME=STEM-AI-mtl/Electrical-engineering

# å…¶ä»–è‹±æ–‡æ•°æ®é›†
DATASET_NAME=squad                    # æ–¯å¦ç¦é—®ç­”
DATASET_NAME=natural_questions        # Google è‡ªç„¶é—®é¢˜

# ä¸­æ–‡æ•°æ®é›†
DATASET_NAME=cmrc2018                 # ä¸­æ–‡é˜…è¯»ç†è§£
```

---

## ğŸ“‹ TODO

### âœ… å·²å®Œæˆ

#### LangGraph å¤šæ™ºèƒ½ä½“æ¶æ„
- [x] è®¾è®¡å¹¶å®ç° Router Agentï¼ˆæ„å›¾åˆ†ç±»ï¼‰
- [x] å®ç° Diagnosis Agentï¼ˆ4èŠ‚ç‚¹ï¼šæ£€ç´¢â†’åˆ†æâ†’å­—æ®µâ†’æŠ¥å‘Šï¼‰
- [x] å®ç° QA Agentï¼ˆ2èŠ‚ç‚¹ï¼šæ£€ç´¢â†’åˆæˆï¼‰
- [x] æ„å»ºä¸»è·¯ç”±å›¾ï¼ˆMain Graphï¼‰
- [x] å®ç°è®°å¿†ç³»ç»Ÿï¼ˆçŸ­æœŸå¯¹è¯ + é•¿æœŸå‘é‡å­˜å‚¨ï¼‰
- [x] å®Œæˆç«¯åˆ°ç«¯æµ‹è¯•

#### ä»£ç è´¨é‡ä¼˜åŒ–
- [x] ä¿®å¤ 25 ä¸ª Ruff ä»£ç è´¨é‡é—®é¢˜
- [x] æ›´æ–° Pyright ç±»å‹æ³¨è§£ï¼ˆLangGraph ç±»å‹å®‰å…¨ï¼‰
- [x] åˆ›å»º pyrightconfig.json é…ç½®
- [x] ç¼–å†™ä»£ç è´¨é‡æŠ¥å‘Šæ–‡æ¡£

#### LaTeX MCP é›†æˆ
- [x] åˆ›å»º LaTeX MCP æœåŠ¡ï¼ˆå†…ç½®æ¨¡æ¿ï¼‰
- [x] å®ç°è®¾å¤‡å¥åº·è¯Šæ–­æŠ¥å‘Šæ¨¡æ¿ï¼ˆ32å­—æ®µï¼Œ9ç« èŠ‚ï¼‰
- [x] é›†æˆåˆ° report_app.py
- [x] æŠ¥å‘Šè¾“å‡ºåˆ° `reports/` ç›®å½•
- [x] æ¨¡æ¿ç³»ç»Ÿè¿ç§»åˆ° LaTeX MCP

#### å¤šæ•°æ®é›†æ”¯æŒ
- [x] å®ç° MultiDatasetLoaderï¼ˆæ”¯æŒ 4 ç§æ•°æ®é›†æ ¼å¼ï¼‰
- [x] æ›´æ–°é…ç½®ç³»ç»Ÿæ”¯æŒ MULTI_DATASETS
- [x] é›†æˆåˆ° CLI build å‘½ä»¤
- [x] æ·»åŠ æ•°æ®é¢„å¤„ç†ï¼ˆè´¨é‡è¿‡æ»¤ã€å»é‡ï¼‰
- [x] åˆ›å»ºå¤šæ•°æ®é›†ä½¿ç”¨æ–‡æ¡£
- [ ] â³ BAAI æ•°æ®é›†ä¸‹è½½ï¼ˆç­‰å¾…ç½‘ç»œï¼‰

#### æ£€ç´¢ç³»ç»Ÿå¢å¼º
- [x] å®ç° BM25 ç¨€ç–æ£€ç´¢ â†’ `bm25_retriever.py`
- [x] å®ç°æ··åˆæ£€ç´¢ï¼ˆRRF èåˆï¼‰â†’ `hybrid_retriever.py`
- [x] å®ç° Cross-Encoder Reranker â†’ `reranker.py`
- [x] å®ç° LLM æŸ¥è¯¢æ‰©å±• â†’ `query_expander.py`
- [x] ä¿®å¤ 22 ä¸ª Pyright ç±»å‹é”™è¯¯

### ğŸ”¥ é«˜ä¼˜å…ˆçº§ï¼ˆæ¶æ„é‡æ„ï¼‰

#### RAGEngine é‡æ„ï¼ˆæ ¸å¿ƒæŠ€æœ¯å€ºåŠ¡ï¼‰
- [ ] æ‹†åˆ† `RAGEngine`ï¼ˆ462 è¡Œ â†’ å¤šä¸ªæœåŠ¡ï¼‰
  - [ ] `VectorStoreService` - å‘é‡åº“ç®¡ç†ï¼ˆåŠ è½½ã€ä¿å­˜ã€æ£€ç´¢ï¼‰
  - [ ] `GenerationService` - LLM è°ƒç”¨å°è£…
  - [ ] `PromptRegistry` - æç¤ºè¯ç®¡ç†
- [ ] åŒæ­¥/å¼‚æ­¥ç»Ÿä¸€
  - [ ] å°† `invoke()` è¿ç§»åˆ° `ainvoke()`
  - [ ] ç§»é™¤ `latex_client.py` ä¸­çš„ `asyncio.run()` åµŒå¥—
  - [ ] ä¿®å¤ `base_enhanced_retriever.py` çš„é˜»å¡å¼å¼‚æ­¥åŒ…è£…
- [ ] Prompt æ¨¡æ¿å¤–éƒ¨åŒ–
  - [ ] å°† 4 å¤„ç¡¬ç¼–ç  Prompt ç§»è‡³ `prompts/` ç›®å½•
  - [ ] æ”¯æŒ YAML/Jinja2 æ ¼å¼
  - [ ] æ”¯æŒç‰ˆæœ¬ç®¡ç†å’Œçƒ­æ›´æ–°

#### é”™è¯¯å¤„ç†ä¸ç±»å‹å®‰å…¨
- [ ] å®šä¹‰è‡ªå®šä¹‰å¼‚å¸¸ç±»
  - [ ] `RetrievalError` - æ£€ç´¢å¤±è´¥
  - [ ] `LLMGenerationError` - ç”Ÿæˆå¤±è´¥
  - [ ] `ConfigurationError` - é…ç½®é”™è¯¯
- [ ] æ›¿æ¢æ‰‹åŠ¨ JSON è§£æï¼ˆ`rag_engine.py:414`ï¼‰
  - [ ] ä½¿ç”¨ LangChain `JsonOutputParser`
  - [ ] ä½¿ç”¨ `PydanticOutputParser` éªŒè¯è¾“å‡º
- [ ] é…ç½®ç®¡ç†é‡æ„
  - [ ] è¿ç§»åˆ° `pydantic-settings`
  - [ ] æ·»åŠ é…ç½®éªŒè¯ï¼ˆå¦‚ `DATASET_SAMPLE_SIZE > 0`ï¼‰
  - [ ] æ”¯æŒç¯å¢ƒå˜é‡å±‚æ¬¡

#### æµ‹è¯•ä¸è´¨é‡ä¿è¯
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆç›®æ ‡è¦†ç›–ç‡ 80%+ï¼‰
  - [ ] `rag_engine.py` æµ‹è¯•
  - [ ] `multi_dataset_loader.py` æµ‹è¯•
  - [ ] `latex_client.py` æµ‹è¯•
- [ ] æ·»åŠ é›†æˆæµ‹è¯•ï¼ˆRAG æµç¨‹ç«¯åˆ°ç«¯ï¼‰
- [ ] æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼ˆæ£€ç´¢å»¶è¿Ÿã€ç”Ÿæˆå»¶è¿Ÿï¼‰

### âš¡ ä¸­ä¼˜å…ˆçº§ï¼ˆåŠŸèƒ½å¢å¼ºï¼‰

#### æ£€ç´¢å¢å¼º â­ éƒ¨åˆ†å·²å®ç°
- [x] å®ç°æ··åˆæ£€ç´¢ï¼ˆBM25 + å‘é‡ï¼‰â†’ `hybrid_retriever.py`
- [x] æ·»åŠ  Reranker é‡æ’åº â†’ `reranker.py`
- [x] æŸ¥è¯¢æ”¹å†™å’Œä¼˜åŒ– â†’ `query_expander.py`
- [ ] è¯„ä¼°æ£€ç´¢æ•ˆæœï¼Œå»ºç«‹åŸºå‡†çº¿
- [ ] å°è¯•æ›´å¥½çš„ä¸­æ–‡ Embedding æ¨¡å‹ï¼ˆbge-large-zhã€m3e-largeï¼‰
- [ ] Embedding æ¨¡å‹å•ä¾‹ç¼“å­˜ï¼ˆé¿å…é‡å¤åŠ è½½ï¼‰

#### å‘é‡å­˜å‚¨ä¼˜åŒ–
- [ ] å®ç°å‘é‡å­˜å‚¨æŠ½è±¡å±‚
  - [ ] å®šä¹‰ `VectorStore` æ¥å£
  - [ ] æ”¯æŒå¤šç§åç«¯ï¼ˆFAISSã€Chromaã€Qdrantï¼‰
- [ ] å¢é‡æ›´æ–°æœºåˆ¶ï¼ˆæ— éœ€å®Œå…¨é‡å»ºï¼‰
- [ ] å‘é‡æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶

#### LangChain/LangGraph æœ€ä½³å®è·µ
- [x] å®ç° Agent ç³»ç»Ÿï¼ˆåŸºäº LangGraphï¼‰
- [x] æ·»åŠ  Memory ç®¡ç†ï¼ˆçŸ­æœŸ + é•¿æœŸï¼‰
- [ ] é›†æˆ LangSmith è¿½è¸ª
- [ ] å®ç° Output Parsersï¼ˆæ›¿ä»£æ‰‹åŠ¨è§£æï¼‰
- [ ] æ·»åŠ  Reasoning Agentï¼ˆå¤æ‚æ¨ç†ï¼‰
- [ ] è¯Šæ–­æµç¨‹å¹¶è¡ŒåŒ–ï¼ˆ`asyncio.gather`ï¼‰

#### æ—¥å¿—ä¸ç›‘æ§
- [ ] ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿï¼ˆstructlogï¼‰
- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§ï¼ˆæ£€ç´¢å»¶è¿Ÿã€LLM è°ƒç”¨ã€Token ç»Ÿè®¡ï¼‰
- [ ] æ·»åŠ ä¸šåŠ¡æŒ‡æ ‡ï¼ˆæŸ¥è¯¢æˆåŠŸç‡ï¼‰

### ğŸš€ ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸè§„åˆ’ï¼‰

#### æ€§èƒ½ä¼˜åŒ–
- [ ] å®Œæ•´å¼‚æ­¥æ”¯æŒï¼ˆæ£€ç´¢ + LLMï¼‰
- [ ] æ‰¹é‡å¤„ç†ä¼˜åŒ–
- [ ] æ·»åŠ ç¼“å­˜å±‚ï¼ˆRedisï¼‰
- [ ] æµå¼è¾“å‡ºæ”¯æŒ

#### æ‰©å±•åŠŸèƒ½
- [ ] å¤šæ¨¡æ€æ”¯æŒï¼ˆå›¾ç‰‡ã€è¡¨æ ¼ï¼‰
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] LangServe éƒ¨ç½²
- [ ] Web UI ç•Œé¢
- [ ] API æœåŠ¡åŒ–

---

## è®¸å¯è¯

MIT License
